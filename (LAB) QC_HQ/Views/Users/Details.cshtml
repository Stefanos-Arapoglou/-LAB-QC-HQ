@model ApplicationUser
@{
    ViewData["Title"] = "Users Details";
}

<h2>User Details 2</h2>

<div class="row">
    <div class="col-md-8">
        <table class="table table-bordered">
            <tr>
                <th>Property</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>User Name</td>
                <td>@Model.UserName</td>
            </tr>
            <tr>
                <td>Normalized User Name</td>
                <td>@Model.NormalizedUserName</td>
            </tr>
            <tr>
                <td>Email</td>
                <td>@Model.Email</td>
            </tr>
            <tr>
                <td>Normalized Email</td>
                <td>@Model.NormalizedEmail</td>
            </tr>
            <tr>
                <td>Phone Number</td>
                <td>@Model.PhoneNumber</td>
            </tr>
            <tr>
                <td>Created At</td>
                <td>@Model.CreatedAt.ToString("yyyy-MM-dd HH:mm")</td>
            </tr>
            <tr>
                <td>First Name</td>
                <td>@Model.FirstName</td>
            </tr>
            <tr>
                <td>Last Name</td>
                <td>@Model.LastName</td>
            </tr>
            <tr>
                <td>Hire Date</td>
                <td>@Model.HireDate?.ToString("yyyy-MM-dd")</td>
            </tr>
            <tr>
                <td>Job Title</td>
                <td>@Model.JobTitle</td>
            </tr>
            <tr>
                <td>Is Active</td>
                <td>@(Model.IsActive ? "Yes" : "No")</td>
            </tr>
        </table>
    </div>
    
    <div class="col-md-4">
        @if (Model.ProfileImage != null && Model.ProfileImage.Length > 0)
        {
            <div class="text-center">
                <h5>Profile Image</h5>
                @{
                    var base64 = Convert.ToBase64String(Model.ProfileImage);
                    var imgSrc = $"data:image/jpeg;base64,{base64}";
                }
                <img src="@imgSrc" alt="Profile Image"
                     class="img-thumbnail" style="max-width: 200px;" />
            </div>
        }
        else
        {
            <div class="text-center">
                <h5>Profile Image</h5>
                <p class="text-muted">No image uploaded</p>
            </div>
        }
    </div>
</div>

<h3>Departments & Clearance Levels</h3>

@if (Model.UserDepartments != null && Model.UserDepartments.Any())
{
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Department Name</th>
                <th>Clearance Level</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var userDept in Model.UserDepartments)
            {
                <tr>
                    <td>@userDept.Department?.Name</td>
                    <td>@userDept.ClearanceLevel</td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p class="text-muted">No departments assigned.</p>
}

<a asp-action="Index" class="btn btn-secondary">Back to List</a>